---
layout: post
title: Progress Update 2st period evaluation
---

For the 2nd phase, almost everything is finished, including all the sub-modules in which I will explain shortly.

I was planing on using mask rcnn as the detection model, however due to training errors and server errors I couldn't finish the training. So I worked on some backup plans. The first attemp was using cv2 and some other modules, with frames of this video as input (image has been processed so that it is better for the model to do detection):

![input image](/images/outfile.jpg "input image")

The simple model gave unsatiesfying result, although it works on other situations where the text is very small.

![input image detection1](/images/outfile-rect.jpg "input image detection1")

The second model is the EAST text detection, with computation power limitations, I did not try all the pre-trained models, but the resnet_v1_50 showed very confident result:

![input image detection2](/images/outfile.png "input image detection2")

As shown above, the detection result is great but not as perfect. In future works I will test all the pre-trained models and see which one works the best. But right now, the work-around is to give the result extra boundaries horizontally to cover all the text.

For text merging, the workflow is to first detect similarity based on context and position then do merging. This is to avoid situations where text is partially covered by some object in some of the frames. By doing so, it will not be recognized as 2 text rather just 1. This also covers some mis-recognition in the text recognition phase.

text_merge.merge_text(['read','reaed', 'rfeaed'])
-> 'rfaed'

Then collect the results and sort by frames, here is the sample result from the first second of the metioned video:

[{'start_frame': 0, 'end_frame': 30, 'text': 'bloomberg'}, {'start_frame': 0, 'end_frame': 30, 'text': 'PRESIDENT TRUMP SPEAKS IN THE ROSE GARDEN'}]

In phase 3, I will be covering the following works:
1, pack the codes into a singularity container
2, test different models of EAST
3, test the codes on different languages
4, format the results into Red Hen requirements.

